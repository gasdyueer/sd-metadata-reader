# SD 图像元数据阅读器

## 项目描述

本项目是一个SD图像元数据阅读器，旨在帮助用户轻松查看和分析Stable Diffusion生成的图像文件中的元数据。它支持多种图像格式（PNG, JPG, JPEG, WebP），并能解析来自WebUI和ComfyUI的元数据，包括正面/负面提示、参数和ComfyUI节点信息。用户可以通过拖放、打开文件/文件夹的方式加载图像，并使用正则表达式搜索元数据内容。

## 功能特点

- **支持多种图像格式:**  支持 PNG, JPG, JPEG, WebP 等常见的图像格式。
- **元数据解析:**  能够解析 Stable Diffusion WebUI 和 ComfyUI 生成的图像元数据。
    - 提取正面和负面提示。
    - 解析生成参数 (Steps, Sampler, CFG scale, Seed, Size 等)。
    - 显示 ComfyUI 节点信息。
- **文件/文件夹加载:**
    - 支持拖放文件或文件夹到程序界面。
    - 提供 "打开文件/文件夹" 按钮浏览文件系统。
    - 支持递归搜索文件夹及其子文件夹中的图像文件。
- **图像预览:**  显示图像文件的预览。
- **元数据查看:**  以结构化的格式显示解析后的元数据，包括基本信息、原始信息和解析数据。
- **ComfyUI 节点列表:**  对于 ComfyUI 生成的图像，单独显示节点列表，并可查看节点详细信息。
- **元数据搜索:**  支持使用正则表达式在元数据中进行搜索，快速定位关键信息。
- **日志和状态反馈:**  提供日志窗口显示程序运行状态和错误信息。
- **清空和返回功能:**  提供 "清空" 按钮重置程序状态，"返回" 按钮返回上一步操作。

## 使用方法

1. **安装依赖:**  使用 `requirements.txt` 文件安装项目依赖。
   ```bash
   pip install -r requirements.txt
   ```
2. **运行程序:**  运行 `main.py` 文件启动程序。
   ```bash
   python main.py
   ```
3. **加载图像:**
   - 拖放图像文件或包含图像的文件夹到程序窗口的拖放区域。
   - 点击 "打开文件/文件夹" 按钮，选择单个/多个图像文件或文件夹。
   - 可以勾选 "递归" 复选框来搜索文件夹的子文件夹。
4. **查看元数据:**  在右侧的 "元数据" 区域查看解析后的图像元数据。
5. **ComfyUI 节点:**  如果图像由 ComfyUI 生成，可以在 "ComfyUI 节点" 列表中查看节点信息，并选择节点查看详细参数。
6. **元数据搜索:**  在 "正则搜索" 输入框中输入正则表达式，点击 "搜索" 按钮进行元数据搜索。

## 文件夹结构

```
├── assets/             # 资源文件 (例如：图标)
├── core/               # 核心功能模块
│   ├── file_handler.py   # 文件处理相关功能 (例如：查找图像文件)
│   ├── metadata_parser.py# 元数据解析功能 (解析 WebUI 和 ComfyUI 元数据)
│   └── __init__.py
├── ui/                 # 用户界面模块 (使用 PySide6)
│   ├── main_window.py  # 主窗口实现
│   ├── widgets.py      # 自定义 UI 组件 (例如：拖放区域)
│   └── __init__.py
├── themes/             # UI 主题文件
├── LICENSE             # 项目许可证 (如果适用)
├── main.py             # 程序入口文件
├── README.md           # 项目 README 文件
└── requirements.txt    # 项目依赖文件
```

## 依赖

- PySide6
- Pillow (PIL)

## 许可证

[MIT License]
